# お気に入り & テンプレート

## ⭐ お気に入り装置
ユーザーが頻繁に使用する装置をブックマークして、素早くアクセスできるようにします。

### 機能
- **お気に入りに追加**: 選択ドロップダウンから装置に「スター」を付けます。
- **クイック選択**: 場所ドロップダウンの「お気に入り」オプションで、スター付きの装置のみを表示します。
- **並べ替え**: マイページでお気に入り装置の順序をカスタマイズします。

### データモデル
- **コレクション**: `favoriteEquipments`
- **フィールド**: `userId`, `equipmentId`, `order`.

## 📋 予約テンプレート (マクロ)
ユーザーが複雑な予約パターン (例: 「毎週の実験セット」) を定義して実行できるようにします。

### 機能
- **テンプレート作成**: 一連の予約 (装置 + 時間 + 日付オフセット) を定義します。
- **ワンクリック予約**: 特定の開始日にテンプレートを適用します。
- **競合チェック**: テンプレートを適用する前に、システムが競合をチェックします。

### データモデル
- **コレクション**: `favoriteReservationTemplates`
- **構造**:
    ```json
    {
      "userId": "...",
      "name": "月曜朝のルーティン",
      "slots": [
        { "equipmentId": "A", "dayOffset": 0, "startTime": "09:00", "endTime": "12:00" },
        { "equipmentId": "B", "dayOffset": 1, "startTime": "13:00", "endTime": "15:00" }
      ]
    }
    ```

### 実装詳細
- **競合チェック**: 対象日の既存予約をクエリすることで、クライアント側 (またはCloud Function経由) で実行されます。
- **アトミック実行**: 理想的には、テンプレート内のすべての予約が一括処理で作成されるべきです。
